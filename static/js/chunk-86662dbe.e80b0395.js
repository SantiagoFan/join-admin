(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-86662dbe"],{"09f4":function(e,t,a){"use strict";a.d(t,"a",function(){return r}),Math.easeInOutQuad=function(e,t,a,s){return e/=s/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function i(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function n(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function r(e,t,a){var r=n(),o=e-r,l=20,c=0;t="undefined"===typeof t?500:t;var d=function e(){c+=l;var n=Math.easeInOutQuad(c,r,o,t);i(n),c<t?s(e):a&&"function"===typeof a&&a()};d()}},3698:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.SearchData},model:{value:e.orderState,callback:function(t){e.orderState=t},expression:"orderState"}},[a("el-tab-pane",{attrs:{label:"全部",name:"all"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"待付款",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"待发货",name:"1"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"已发货",name:"2"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"待评价",name:"3"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"已完成",name:"4"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"已撤销",name:"-1"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"已退款",name:"-2"}})],1),e._v(" "),a("div",{staticClass:"filter-container",staticStyle:{display:"inline-boock",float:"right"}},[a("div",{staticClass:"block",staticStyle:{display:"inline-block","margin-bottom":"10px","vertical-align":"middle"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.listQuery.searchTime,callback:function(t){e.$set(e.listQuery,"searchTime",t)},expression:"listQuery.searchTime"}})],1),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"标题"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.SearchData(t)}},model:{value:e.listQuery.title,callback:function(t){e.$set(e.listQuery,"title",t)},expression:"listQuery.title"}}),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.SearchData}},[e._v("\n      搜索\n    ")])],1),e._v(" "),a("div",{staticClass:"action-container"},[a("el-button-group",[a("el-button",{staticClass:"action-item",attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.BatchSend}},[e._v("批量发货")]),e._v(" "),a("el-button",{staticClass:"action-item",attrs:{icon:"el-icon-delete"},on:{click:e.batchDelete}},[e._v("删除")])],1)],1),e._v(" "),e._l(e.list,function(t,s){return a("div",{key:s,staticClass:"order-item"},[a("table",[a("thead",[a("tr",[a("th",[a("el-checkbox",{model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"item.checked"}}),e._v(" "),a("span",[e._v(e._s(t.createTime))]),e._v(" "),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("订单号: "+e._s(t.sn))])],1),e._v(" "),a("th",{staticClass:"action-cell"},[e._v("——")]),e._v(" "),a("th",{staticStyle:{width:"100px"}},[e._v("——")]),e._v(" "),a("th",{staticClass:"action-cell"},[e._v("——")]),e._v(" "),a("th",{attrs:{colspan:"2"}},[e._v("——")])])]),e._v(" "),a("tbody",e._l(t.children,function(s,i){return a("tr",{key:i},[a("td",{staticClass:"noborder"},[a("div",{staticClass:"goods-image"},[a("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:s.imgurl+"!size=s"}})],1),e._v(" "),a("div",{staticClass:"goods-info"},[a("p",{staticClass:"goods-title"},[a("el-link",{attrs:{underline:!1,type:"primary"}},[e._v(e._s(s.goodsName))])],1),e._v(" "),a("p",{staticClass:"goods-spec"},[e._v(e._s(e._f("regroupSpec")(s.skuName)))])])]),e._v(" "),a("td",{staticClass:"noborder"},[e._v("￥"+e._s(s.price))]),e._v(" "),a("td",{staticClass:"noborder"},[e._v("数量："+e._s(s.number))]),e._v(" "),a("td",[e._v("1")]),e._v(" "),0===i?a("td",{staticClass:"action-cell",attrs:{rowspan:4}},[e._v("￥"+e._s(t.totalAmount))]):e._e(),e._v(" "),0===i?a("td",{staticClass:"action-cell",attrs:{rowspan:4}},[e._v("\n            "+e._s(e._f("getOrderState")(t.orderState))+" "),a("br"),e._v(" "),a("router-link",{staticStyle:{"margin-top":"6px",display:"inline-block",color:"#1890ff"},attrs:{to:"/order/detail?id="+t.id}},[e._v("订单详情")]),e._v(" "),1===t.orderState&&0===t.isDelivered?a("el-button",{staticStyle:{"margin-top":"6px"},attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return e.aloneBatchSend(t.id)}}},[e._v("确认发货")]):e._e(),e._v(" "),2===t.orderState&&null==t.expressCompany?a("el-button",{staticStyle:{"margin-top":"6px"},attrs:{type:"warning",plain:"",size:"mini"},on:{click:function(a){return e.showExpressInfo(t.sn)}}},[e._v("运单信息")]):e._e()],1):e._e()])}),0)])])}),e._v(" "),0===e.total?a("div",{staticClass:"el-table__empty-block",staticStyle:{"border-bottom":"1px solid #dfe4ed","border-top":"1px solid #dfe4ed"}},[a("span",{staticClass:"el-table__empty-text",staticStyle:{color:"#606266"}},[e._v("暂无数据")])]):e._e(),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.loadData}}),e._v(" "),a("el-dialog",{attrs:{title:"发货信息",visible:e.showExpressDialog,width:"600px"},on:{"update:visible":function(t){e.showExpressDialog=t}}},[a("el-form",{ref:"expressForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:e.rules,model:e.express,"label-position":"left","label-width":"80px"}},[a("el-form-item",{attrs:{label:"快递公司",prop:"expressCompany"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"请选择快递公司"},model:{value:e.express.expressCompany,callback:function(t){e.$set(e.express,"expressCompany",t)},expression:"express.expressCompany"}},e._l(e.expressOptions,function(t,s){return a("el-option",{key:s,attrs:{label:t,value:s}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(s))])])}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"运单编号",prop:"expressCode"}},[a("el-input",{attrs:{clearable:""},model:{value:e.express.expressCode,callback:function(t){e.$set(e.express,"expressCode",t)},expression:"express.expressCode"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showExpressDialog=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.ConfirmExpress}},[e._v("确定发货")])],1)],1)],2)},i=[],n=(a("ac6a"),a("b775")),r={Query:function(e){return Object(n["a"])({url:"/backEnd/orders",method:"post",data:e})},Detail:function(e){return Object(n["a"])({url:"/backEnd/orderNestedOrderDetail",method:"get",params:{id:e,timestamp:(new Date).getTime()}})},getExpressInfo:function(e,t){return Object(n["a"])({url:"/expressTrace",method:"get",params:{expNo:e,expCode:t,timestamp:(new Date).getTime()}})},BatchInSend:function(e){return Object(n["a"])({url:"/backEnd/batchSend",method:"post",data:{ids:e}})},UpdateExpressInfo:function(e){return Object(n["a"])({url:"/goodsDelivery",method:"put",data:e})},Update:function(e){return Object(n["a"])({url:"/goods",method:"put",data:e})},Create:function(e){return Object(n["a"])({url:"/goods",method:"post",data:e})},getBrands:function(){return Object(n["a"])({url:"/dropDown/brands",method:"get"})},fetchGoods:function(e){return Object(n["a"])({url:"/goods",method:"get",params:{id:e,timestamp:(new Date).getTime()}})},batchDelete:function(e){return Object(n["a"])({url:"/backEnd/orders",method:"delete",data:{ids:e}})}},o=r,l=a("333d"),c=a("cebb"),d={SF:"顺丰速运",HTKY:"百世快递",ZTO:"中通快递",STO:"申通快递",YTO:"圆通速递",YD:"韵达速递",YZPY:"邮政快递包裹",EMS:"EMS",HHTT:"天天快递",JD:"京东快递",UC:"优速快递",DBL:"德邦快递",ZJS:"宅急送",TNT:"TNT快递",UPS:"UPS",DHL:"DHL",FEDEX:"FEDEX联邦(国内件)",FEDEX_GJ:"FEDEX联邦(国际件)"},u={name:"OrderList",components:{Pagination:l["a"]},mixins:[c["a"]],data:function(){return{api:o,orderState:"all",listQuery:{title:void 0,searchTime:[]},showExpressDialog:!1,express:{sn:null,expressCompany:"",expressCode:""},expressOptions:d,rules:{expressCompany:[{required:!0,message:"请选择快递公司",trigger:"blur"}],expressCode:[{required:!0,message:"请输入运单编号",trigger:"blur"}]},check:!1,ExportFields:["id","sn","totalAmount","subAmount","isPaid","isDelivered"]}},created:function(){this.loadData()},methods:{showExpressInfo:function(e){this.showExpressDialog=!0,this.express.sn=e,this.express.expressCompany="",this.express.expressCode=""},loadListBefore:function(e){this.listQuery.orderState="all"===this.orderState?null:this.orderState},ConfirmExpress:function(){var e=this;this.$refs["expressForm"].validate(function(t){t&&o.UpdateExpressInfo(e.express).then(function(t){e.showExpressDialog=!1,e.$notify({title:"成功",message:"快递更新成功",type:"success",duration:2e3}),e.SearchData()})})},BatchSend:function(){var e=this,t=this.listBatchSendSelected();t.length>0?o.BatchInSend(t).then(function(){e.$message.success("确认发货成功！"),e.loadData()}):this.$message.error({message:"请选择要发货的订单",type:"warning"})},batchDelete:function(){var e=this,t=this.getSelectId();t.length>0?this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.api.batchDelete(t).then(function(t){e.$message.info("删除成功！"),e.loadData()})}):this.$message.error({message:"请选择要删除的订单！",type:"warning"})},aloneBatchSend:function(e){var t=this;this.$confirm("是否确认发货?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=[];a.push(e),o.BatchInSend(a).then(function(e){2e4===e.code&&t.loadData()})})},listBatchSendSelected:function(){var e=[];return this.list.forEach(function(t){t.checked&&1===t.orderState&&0===t.isDelivered&&e.push(t.id)}),e},getSelectId:function(){var e=[];return this.list.forEach(function(t){t.checked&&e.push(t.id)}),e}}},p=u,m=(a("f30f"),a("2877")),h=Object(m["a"])(p,s,i,!1,null,null,null);t["default"]=h.exports},cebb:function(e,t,a){"use strict";a("ac4d"),a("8a81"),a("ac6a");var s={filters:{statusFilter:function(e){var t={published:"success",draft:"info",deleted:"danger"};return t[e]}}};t["a"]={mixins:[s],data:function(){return{list:[],total:0,Field:"id",listQuery:{page:1,limit:10,order:"id",sort:"DESC"},listLoading:!0,downloadLoading:!1,ExportFields:["id"],dialogFormVisible:!1,dialogStatus:""}},methods:{HandleCreate:function(e){var t=this;if(this.$refs.singleTable.selection.length>0){var a={};a["ids"]=this.$refs.singleTable.selection.map(function(e){return e[t.Field]}),a["type"]=e,this.api.goodsSaleable(a).then(function(e){2e4===e.code?(t.$message({message:"操作成功",type:"success"}),t.SearchData()):t.$message({message:"操作失败",type:"error"})})}else this.$message({message:"请选择要操作的数据",type:"error"})},CreateData:function(){var e=this;this.$refs["dataForm"].validate(function(t){t&&e.api.Create(e.temp).then(function(t){e.dialogFormVisible=!1,e.SearchData(),e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3})})})},BatchDelete:function(){var e=this;if(this.$refs.singleTable.selection.length>0){var t=this.$refs.singleTable.selection.map(function(t){return t[e.Field]});this.api.Delete(t).then(function(t){2e4===t.code?(e.$message({message:"操作成功",type:"success"}),e.SearchData()):e.$message({message:"操作失败",type:"error"})})}else this.$message({message:"请选择删除的数据",type:"error"})},RowDelete:function(e){var t=this,a=[e[this.Field]];this.api.Delete(a).then(function(e){2e4===e.code?(t.$message({message:"操作成功",type:"success"}),t.SearchData()):t.$message({message:"操作失败",type:"error"})})},HandleUpdate:function(e){this.temp=Object.assign({},e),this.dialogStatus="update",this.dialogFormVisible=!0},UpdateData:function(){var e=this;this.$refs["dataForm"].validate(function(t){if(t){var a=Object.assign({},e.temp);e.api.Update(a).then(function(t){var a=!0,s=!1,i=void 0;try{for(var n,r=e.list[Symbol.iterator]();!(a=(n=r.next()).done);a=!0){var o=n.value;if(o.id===e.temp.id){var l=e.list.indexOf(o);e.list.splice(l,1,e.temp);break}}}catch(c){s=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}e.dialogFormVisible=!1,e.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3})})}})},ConfirmData:function(){"create"===this.dialogStatus?this.CreateData():this.UpdateData()},sortChange:function(e){this.listQuery.page=1,this.listQuery.sort="ascending"===e.order?"ASC":"DESC",this.listQuery.order=e.prop,this.loadData()},loadData:function(){var e=this;this.listLoading=!0,this.loadListBefore(this.QueryParams),this.api.Query(this.listQuery).then(function(t){e.afterLoadData&&(t.data.items=e.afterLoadData(t.data.items)),e.list=t.data.items,e.total=t.data.total,e.listLoading=!1,e.$previewRefresh()})},loadListBefore:function(e){return e},SearchData:function(){this.listQuery.page=1,this.loadData()},ExportData:function(){var e=this;this.downloadLoading=!0,Promise.all([a.e("chunk-6e83591c"),a.e("chunk-5164a781"),a.e("chunk-5bdd67a2"),a.e("chunk-54b312fe")]).then(a.bind(null,"4bf8d")).then(function(t){var a=e.list.map(function(t){return e.ExportFormateRow?e.ExportFormateRow(t):t}),s=a.map(function(t){return e.ExportFields.map(function(e){return t[e]})});t.export_json_to_excel({header:e.ExportFields,data:s,filename:"table-list"}),e.downloadLoading=!1})},resetTemp:function(){this.temp={id:void 0}}}}},f30f:function(e,t,a){"use strict";var s=a("f558"),i=a.n(s);i.a},f558:function(e,t,a){}}]);