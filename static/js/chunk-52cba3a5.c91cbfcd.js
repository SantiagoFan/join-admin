(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52cba3a5"],{"09f4":function(t,e,a){"use strict";a.d(e,"a",function(){return o}),Math.easeInOutQuad=function(t,e,a,i){return t/=i/2,t<1?a/2*t*t+e:(t--,-a/2*(t*(t-2)-1)+e)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function n(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(t,e,a){var o=s(),r=t-o,l=20,c=0;e="undefined"===typeof e?500:e;var u=function t(){c+=l;var s=Math.easeInOutQuad(c,o,r,e);n(s),c<e?i(t):a&&"function"===typeof a&&a()};u()}},"0cf0":function(t,e,a){"use strict";var i=a("b553"),n=a.n(i);n.a},"0f4e":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.SearchData},model:{value:t.listQuery.isSaleable,callback:function(e){t.$set(t.listQuery,"isSaleable",e)},expression:"listQuery.isSaleable"}},[a("el-tab-pane",{attrs:{label:"在售中",name:"1"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"已售罄",name:"3"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"仓库中",name:"0"}})],1),t._v(" "),a("div",{staticClass:"filter-container",staticStyle:{display:"inline-block",float:"right"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"标题"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.SearchData(e)}},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}}),t._v(" "),a("el-cascader",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{props:t.props,filterable:"",clearable:"",options:t.categoryOptions,"show-all-levels":!1,placeholder:"请选择产品分类","change-on-select":!1},model:{value:t.listQuery.category,callback:function(e){t.$set(t.listQuery,"category",e)},expression:"listQuery.category"}}),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.SearchData}},[t._v("\n      搜索\n    ")])],1),t._v(" "),a("div",{staticClass:"action-container",staticStyle:{display:"inline-block",float:"left"}},[a("router-link",{attrs:{to:"/goods/edit"}},[a("el-button",{staticClass:"action-item",attrs:{size:"mini",type:"primary",icon:"el-icon-edit"}},[t._v("添加")])],1),t._v(" "),a("el-button-group",[a("el-button",{staticClass:"action-item",attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.HandleCreate(1)}}},[t._v("批量上架")]),t._v(" "),a("el-button",{staticClass:"action-item",attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.HandleCreate(0)}}},[t._v("批量下架")]),t._v(" "),a("el-button",{staticClass:"action-item",attrs:{size:"mini",icon:"el-icon-delete"},on:{click:t.BatchDelete}},[t._v("删除")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.list,fit:"","highlight-current-row":""},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品名称","class-name":"goods_item"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("div",{staticClass:"p-img"},[a("img",{attrs:{src:i.imgDefault+"!size=s"}})]),t._v(" "),a("div",{staticClass:"p-info"},[a("router-link",{attrs:{to:"/goods/edit?id="+i.id}},[a("span",[t._v(t._s(i.name))])]),t._v(" "),a("div",{staticClass:"p-sub"},[t._v("￥"+t._s(i.price))])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"库存数量",prop:"stockNum",sortable:"custom",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"添加时间",prop:"createTime",sortable:"custom",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("parseTime")(e.row.createTime,"{y}-{m}-{d} {h}:{i}")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"230",prop:"","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("router-link",{attrs:{to:"/goods/edit?id="+i.id}},[a("el-button",{attrs:{type:"primary",plain:"",size:"mini",icon:"el-icon-edit"}},[t._v("编辑")])],1),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger",plain:"",icon:"el-icon-delete"},on:{click:function(e){return t.RowDelete(i)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.loadData}})],1)},n=[],s=a("b775"),o="/backEnd/goods",r={Query:function(t){return Object(s["a"])({url:"/backEnd/goodsQuery",method:"post",data:t})},Delete:function(t){return Object(s["a"])({url:o,method:"delete",data:{ids:t}})},Update:function(t){return Object(s["a"])({url:o,method:"put",data:t})},Create:function(t){return Object(s["a"])({url:o,method:"post",data:t})},getBrands:function(){return Object(s["a"])({url:"/dropDown/brands",method:"get",params:{timestamp:(new Date).getTime()}})},fetchGoods:function(t){return Object(s["a"])({url:o,method:"get",params:{id:t,timestamp:(new Date).getTime()}})},goodsNestedSkus:function(t){return Object(s["a"])({url:"/backEnd/goodsNestedSkus",method:"get",params:{id:t,timestamp:(new Date).getTime()}})},goodsSaleable:function(t){return Object(s["a"])({url:"/backEnd/goodsSaleable",method:"post",data:t})}},l=r,c=a("8263"),u=a("333d"),d=a("cebb"),m={name:"GoodsList",components:{Pagination:u["a"]},filters:{},mixins:[d["a"]],data:function(){return{api:l,listQuery:{isSaleable:"1",type:void 0,name:void 0,category:null},rules:{},categoryOptions:[],props:{label:"name",value:"id"}}},created:function(){this.categoryLoadData(),this.loadData()},methods:{categoryLoadData:function(){var t=this;c["a"].get().then(function(e){t.categoryOptions=e.data})}}},p=m,f=(a("0cf0"),a("2877")),h=Object(f["a"])(p,i,n,!1,null,"3c241a50",null);e["default"]=h.exports},8263:function(t,e,a){"use strict";var i=a("b775"),n="/backend/goodsCategory",s={get:function(){return Object(i["a"])({url:n,method:"get",params:{timestamp:(new Date).getTime()}})},add:function(t){return Object(i["a"])({url:n,method:"post",data:t})},update:function(t){return Object(i["a"])({url:n,method:"put",data:t})},delete:function(t){return Object(i["a"])({url:n,method:"delete",data:{id:t}})}};e["a"]=s},b553:function(t,e,a){},cebb:function(t,e,a){"use strict";a("ac4d"),a("8a81"),a("ac6a");var i={filters:{statusFilter:function(t){var e={published:"success",draft:"info",deleted:"danger"};return e[t]}}};e["a"]={mixins:[i],data:function(){return{list:[],total:0,Field:"id",listQuery:{page:1,limit:10,order:"id",sort:"DESC"},listLoading:!0,downloadLoading:!1,ExportFields:["id"],dialogFormVisible:!1,dialogStatus:""}},methods:{HandleCreate:function(t){var e=this;if(this.$refs.singleTable.selection.length>0){var a={};a["ids"]=this.$refs.singleTable.selection.map(function(t){return t[e.Field]}),a["type"]=t,this.api.goodsSaleable(a).then(function(t){2e4===t.code?(e.$message({message:"操作成功",type:"success"}),e.SearchData()):e.$message({message:"操作失败",type:"error"})})}else this.$message({message:"请选择要操作的数据",type:"error"})},CreateData:function(){var t=this;this.$refs["dataForm"].validate(function(e){e&&t.api.Create(t.temp).then(function(e){t.dialogFormVisible=!1,t.SearchData(),t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3})})})},BatchDelete:function(){var t=this;if(this.$refs.singleTable.selection.length>0){var e=this.$refs.singleTable.selection.map(function(e){return e[t.Field]});this.api.Delete(e).then(function(e){2e4===e.code?(t.$message({message:"操作成功",type:"success"}),t.SearchData()):t.$message({message:"操作失败",type:"error"})})}else this.$message({message:"请选择删除的数据",type:"error"})},RowDelete:function(t){var e=this,a=[t[this.Field]];this.api.Delete(a).then(function(t){2e4===t.code?(e.$message({message:"操作成功",type:"success"}),e.SearchData()):e.$message({message:"操作失败",type:"error"})})},HandleUpdate:function(t){this.temp=Object.assign({},t),this.dialogStatus="update",this.dialogFormVisible=!0},UpdateData:function(){var t=this;this.$refs["dataForm"].validate(function(e){if(e){var a=Object.assign({},t.temp);t.api.Update(a).then(function(e){var a=!0,i=!1,n=void 0;try{for(var s,o=t.list[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var r=s.value;if(r.id===t.temp.id){var l=t.list.indexOf(r);t.list.splice(l,1,t.temp);break}}}catch(c){i=!0,n=c}finally{try{a||null==o.return||o.return()}finally{if(i)throw n}}t.dialogFormVisible=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3})})}})},ConfirmData:function(){"create"===this.dialogStatus?this.CreateData():this.UpdateData()},sortChange:function(t){this.listQuery.page=1,this.listQuery.sort="ascending"===t.order?"ASC":"DESC",this.listQuery.order=t.prop,this.loadData()},loadData:function(){var t=this;this.listLoading=!0,this.loadListBefore(this.QueryParams),this.api.Query(this.listQuery).then(function(e){t.afterLoadData&&(e.data.items=t.afterLoadData(e.data.items)),t.list=e.data.items,t.total=e.data.total,t.listLoading=!1,t.$previewRefresh()})},loadListBefore:function(t){return t},SearchData:function(){this.listQuery.page=1,this.loadData()},ExportData:function(){var t=this;this.downloadLoading=!0,Promise.all([a.e("chunk-6e83591c"),a.e("chunk-5164a781"),a.e("chunk-5bdd67a2"),a.e("chunk-54b312fe")]).then(a.bind(null,"4bf8d")).then(function(e){var a=t.list.map(function(e){return t.ExportFormateRow?t.ExportFormateRow(e):e}),i=a.map(function(e){return t.ExportFields.map(function(t){return e[t]})});e.export_json_to_excel({header:t.ExportFields,data:i,filename:"table-list"}),t.downloadLoading=!1})},resetTemp:function(){this.temp={id:void 0}}}}}}]);